//******************************************************************************
// 床[floor.cpp]
// Author : 管原司
//******************************************************************************
//******************************************************************************
// インクルードファイル
//******************************************************************************
#include "main.h"
#include "renderer.h"
#include "manager.h"
#include "floor.h"
//******************************************************************************
// マクロ定義
//******************************************************************************
#define FLOOR_TEX	("data/Texture/floor001.jpg")	// テクスチャファイル
//******************************************************************************
// 静的メンバ変数初期化
//******************************************************************************
LPDIRECT3DTEXTURE9 CFloor::m_pTexture = NULL;
//******************************************************************************
// コンストラクタ
//******************************************************************************
CFloor::CFloor(int nPriority)
{
}
//******************************************************************************
// デストラクタ
//******************************************************************************
CFloor::~CFloor()
{
}
//******************************************************************************
// テクスチャ読み込み
//******************************************************************************
HRESULT CFloor::Load(void)
{
	// レンダラー取得
	LPDIRECT3DDEVICE9 pDevice = CManager::GetRenderer()->GetDevice();

	// テクスチャ読み込み
	D3DXCreateTextureFromFile(pDevice, FLOOR_TEX, &m_pTexture);

	return S_OK;
}
//******************************************************************************
// テクスチャ破棄
//******************************************************************************
void CFloor::Unload(void)
{
	// NULLチェック
	if (m_pTexture != NULL)
	{
		// 破棄
		m_pTexture->Release();

		// NULL
		m_pTexture = NULL;
	}
}
//******************************************************************************
// 生成関数
//******************************************************************************
CFloor * CFloor::Create(D3DXVECTOR3 pos, D3DXVECTOR3 rot, D3DXVECTOR3 size, D3DXCOLOR col)
{
	// CFloorのポインタ
	CFloor *pFloor = NULL;

	// NULLの場合
	if (pFloor == NULL)
	{
		// メモリ確保
		pFloor = new CFloor;

		// NULLでない場合
		if (pFloor != NULL)
		{
			// 情報設定
			pFloor->SetPolygon(pos, rot, size, col);

			// オブジェクトタイプ設定
			pFloor->SetObjType(OBJTYPE_FLOOR);

			// テクスチャ受け渡し
			pFloor->BindTexture(m_pTexture);

			// 初期化
			pFloor->Init();
		}
	}

	// ポインタを返す
	return pFloor;
}
//******************************************************************************
// 初期化関数
//******************************************************************************
HRESULT CFloor::Init(void)
{
	// 初期化
	CScene3d::Init();

	return S_OK;
}
//******************************************************************************
// 終了関数
//******************************************************************************
void CFloor::Uninit(void)
{
	// 終了
	CScene3d::Uninit();
}
//******************************************************************************
// 更新関数
//******************************************************************************
void CFloor::Update(void)
{
	// 更新
	CScene3d::Update();
}
//******************************************************************************
// 描画関数
//******************************************************************************
void CFloor::Draw(void)
{
	// 描画
	CScene3d::Draw();
}